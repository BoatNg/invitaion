<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>"TRON" BOX PARTY</title>
    <meta name="description" content="sorry we're late invitation">
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
    <noscript>
        <strong>We're sorry but invitation doesn't work properly without JavaScript enabled. Please enable it to
            continue.</strong>
    </noscript>
    <div id="app"></div>
    <script src="//res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
    <script>
        let url = window.location.href
        window.onload = function () {
            $.get('/api/v1/wechat-config', { url: url }).then(function (data) {
                wx.config({
                    debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                    appId: data.appId, // 必填，公众号的唯一标识
                    timestamp: data.timestamp, // 必填，生成签名的时间戳
                    nonceStr: data.nonceStr, // 必填，生成签名的随机串
                    signature: data.signature,// 必填，签名
                    jsApiList: ['updateAppMessageShareData', 'updateTimelineShareData'] // 必填，需要使用的JS接口列表
                });
            })
        }
        wx.ready(function () {   //需在用户可能点击分享按钮前就先调用
            console.log('ready')
            wx.updateAppMessageShareData({
                title: '"TRON" BOX PARTY',
                desc: "sorry we're late invitation", // 分享描述
                link: 'https://www.boatng.cn', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                imgUrl: 'https://www.boatng.cn/img/share.jpg', // 分享图标
            });
            wx.updateTimelineShareData({
                title: '"TRON" BOX PARTY', // 分享标题
                link: 'https://www.boatng.cn', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                imgUrl: 'https://www.boatng.cn/img/share.jpg', // 分享图标
            })
        });
        wx.error(function (err) {
            console.log(err)
        });
        console.log('test auto deploy')
    </script>
    <!-- built files will be auto injected -->
</body>

</html>